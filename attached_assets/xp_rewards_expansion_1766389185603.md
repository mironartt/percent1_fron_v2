# –†–∞—Å—à–∏—Ä–µ–Ω–∏–µ —Å–∏—Å—Ç–µ–º—ã –Ω–∞–≥—Ä–∞–¥ XP

**–î–∞—Ç–∞:** 2025-12-22
**–í–µ—Ä—Å–∏—è API:** —Ç–µ–∫—É—â–∞—è
**–°—Ç–∞—Ç—É—Å:** –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ

## –ö—Ä–∞—Ç–∫–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ

–î–æ–±–∞–≤–ª–µ–Ω—ã –Ω–æ–≤—ã–µ –∏—Å—Ç–æ—á–Ω–∏–∫–∏ –Ω–∞—á–∏—Å–ª–µ–Ω–∏—è XP –¥–ª—è –ø–æ–≤—ã—à–µ–Ω–∏—è –º–æ—Ç–∏–≤–∞—Ü–∏–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π. –¢–µ–ø–µ—Ä—å XP –Ω–∞—á–∏—Å–ª—è–µ—Ç—Å—è –Ω–µ —Ç–æ–ª—å–∫–æ –∑–∞ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –ø—Ä–∏–≤—ã—á–µ–∫, –Ω–æ –∏ –∑–∞:
- –ó–∞–≤–µ—Ä—à–µ–Ω–∏–µ —à–∞–≥–æ–≤ —Ü–µ–ª–µ–π
- –ó–∞–≤–µ—Ä—à–µ–Ω–∏–µ —Ü–µ–ª–µ–π —Ü–µ–ª–∏–∫–æ–º
- –í–µ–¥–µ–Ω–∏–µ –¥–Ω–µ–≤–Ω–∏–∫–∞

## –ß—Ç–æ –∏–∑–º–µ–Ω–∏–ª–æ—Å—å

### –ù–æ–≤—ã–µ —Ç–∏–ø—ã XP —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π

–î–æ–±–∞–≤–ª–µ–Ω—ã 3 –Ω–æ–≤—ã—Ö —Ç–∏–ø–∞ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π (–æ–Ω–∏ —É–∂–µ —Å—É—â–µ—Å—Ç–≤–æ–≤–∞–ª–∏ –≤ –º–æ–¥–µ–ª–∏, –Ω–æ –Ω–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–ª–∏—Å—å):

| –¢–∏–ø | –°—É–º–º–∞ XP | –ö–æ–≥–¥–∞ –Ω–∞—á–∏—Å–ª—è–µ—Ç—Å—è |
|-----|----------|-------------------|
| `goal_step_completed` | **+25 XP** | –ü—Ä–∏ –æ—Ç–º–µ—Ç–∫–µ —à–∞–≥–∞ —Ü–µ–ª–∏ –∫–∞–∫ –≤—ã–ø–æ–ª–Ω–µ–Ω–Ω–æ–≥–æ (`is_complete = true`) |
| `goal_completed` | **+150 XP** | –ü—Ä–∏ –∑–∞–≤–µ—Ä—à–µ–Ω–∏–∏ —Ü–µ–ª–∏ (`status = 'complete'`) |
| `journal_entry` | **+10 XP** | –ü—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ –ù–û–í–û–ô –∑–∞–ø–∏—Å–∏ –≤ –¥–Ω–µ–≤–Ω–∏–∫–µ (–Ω–µ –ø—Ä–∏ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–∏) |

### –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –Ω–∞—á–∏—Å–ª–µ–Ω–∏–µ

XP –Ω–∞—á–∏—Å–ª—è–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏:

1. **–ü—Ä–∏ –∑–∞–≤–µ—Ä—à–µ–Ω–∏–∏ —à–∞–≥–∞ —Ü–µ–ª–∏** ‚Äî –∫–æ–≥–¥–∞ —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç `is_complete: true` —á–µ—Ä–µ–∑ —ç–Ω–¥–ø–æ–∏–Ω—Ç `/api/rest/front/app/goals/steps/update/`
2. **–ü—Ä–∏ –∑–∞–≤–µ—Ä—à–µ–Ω–∏–∏ —Ü–µ–ª–∏** ‚Äî –∫–æ–≥–¥–∞ —Ü–µ–ª—å –ø–µ—Ä–µ–≤–æ–¥–∏—Ç—Å—è –≤ —Å—Ç–∞—Ç—É—Å `complete` —á–µ—Ä–µ–∑ `/api/rest/front/app/goals/update/`
3. **–ü—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ –¥–Ω–µ–≤–Ω–∏–∫–∞** ‚Äî –∫–æ–≥–¥–∞ —Å–æ–∑–¥–∞–µ—Ç—Å—è –Ω–æ–≤–∞—è –∑–∞–ø–∏—Å—å (–±–µ–∑ `diary_id`) —á–µ—Ä–µ–∑ `/api/rest/front/app/diary/update/`

## –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –¥–ª—è —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–∞

### 1. –ò—Å—Ç–æ—Ä–∏—è XP

–≠–Ω–¥–ø–æ–∏–Ω—Ç `/api/rest/front/app/habits/xp/history-grouped/` —É–∂–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –Ω–æ–≤—ã–µ —Ç–∏–ø—ã —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π.

**–§–∏–ª—å—Ç—Ä—ã –ø–æ –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º:**
- `transaction_category_filter: 'habits'` ‚Äî —Ç–æ–ª—å–∫–æ –ø—Ä–∏–≤—ã—á–∫–∏
- `transaction_category_filter: 'goals'` ‚Äî **–ù–û–í–û–ï:** —à–∞–≥–∏ –∏ —Ü–µ–ª–∏ (`goal_step_completed`, `goal_completed`)
- `transaction_category_filter: 'diary'` ‚Äî **–û–ë–ù–û–í–õ–ï–ù–û:** –¥–Ω–µ–≤–Ω–∏–∫ (`journal_entry`, `journal_penalty`)
- `transaction_category_filter: 'planning'` ‚Äî —à—Ç—Ä–∞—Ñ—ã –∑–∞ –ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ
- `transaction_category_filter: 'rewards'` ‚Äî —Ç—Ä–∞—Ç—ã –Ω–∞ –Ω–∞–≥—Ä–∞–¥—ã
- `transaction_category_filter: 'other'` ‚Äî –ø—Ä–æ—á–µ–µ (–¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è, —Ä—É—á–Ω—ã–µ –∫–æ—Ä—Ä–µ–∫—Ç–∏—Ä–æ–≤–∫–∏)

### 2. –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –Ω–æ–≤—ã—Ö —Ç–∏–ø–æ–≤

–†–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã–µ –Ω–∞–∑–≤–∞–Ω–∏—è –¥–ª—è UI:

```javascript
const XP_TRANSACTION_TITLES = {
  // –°—É—â–µ—Å—Ç–≤—É—é—â–∏–µ
  'habit_completed': '–ù–∞–≥—Ä–∞–¥–∞ –∑–∞ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –ø—Ä–∏–≤—ã—á–µ–∫',
  'habit_penalty': '–®—Ç—Ä–∞—Ñ –∑–∞ –ø—Ä–æ–ø—É—Å–∫ –ø—Ä–∏–≤—ã—á–µ–∫',
  'planning_penalty': '–®—Ç—Ä–∞—Ñ –∑–∞ –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏—è',
  'journal_penalty': '–®—Ç—Ä–∞—Ñ –∑–∞ –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –¥–Ω–µ–≤–Ω–∏–∫–∞',
  'achievement_bonus': '–ë–æ–Ω—É—Å –∑–∞ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–µ',
  'reward_redeemed': '–ü–æ–ª—É—á–µ–Ω–∞ –Ω–∞–≥—Ä–∞–¥–∞',

  // –ù–û–í–´–ï
  'goal_step_completed': '–ù–∞–≥—Ä–∞–¥–∞ –∑–∞ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ —à–∞–≥–∞ —Ü–µ–ª–∏',  // +25 XP
  'goal_completed': '–ù–∞–≥—Ä–∞–¥–∞ –∑–∞ –∑–∞–≤–µ—Ä—à–µ–Ω–∏–µ —Ü–µ–ª–∏',             // +150 XP
  'journal_entry': '–ù–∞–≥—Ä–∞–¥–∞ –∑–∞ –∑–∞–ø–∏—Å—å –≤ –¥–Ω–µ–≤–Ω–∏–∫',            // +10 XP
};
```

### 3. –ì—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∞ –≤ –∏—Å—Ç–æ—Ä–∏–∏

–í –æ—Ç–≤–µ—Ç–µ `/api/rest/front/app/habits/xp/history-grouped/` –Ω–æ–≤—ã–µ —Ç–∏–ø—ã –ø–æ—è–≤–ª—è—é—Ç—Å—è –≤ –±–ª–æ–∫–µ `goals_list`:

```json
{
  "status": "ok",
  "data": {
    "history_groups": [
      {
        "date": "2025-12-22",
        "total_earned": 185,
        "total_spent": 0,
        "net_change": 185,
        "entries": [
          {
            "type": "goals",
            "title": "–ù–∞–≥—Ä–∞–¥—ã –∑–∞ —Ü–µ–ª–∏",
            "amount": 185,
            "details": [
              {
                "type": "goal_step_completed",
                "amount": 25,
                "metadata": {
                  "step_id": 123,
                  "step_title": "–ò–∑—É—á–∏—Ç—å –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é API"
                }
              },
              {
                "type": "goal_completed",
                "amount": 150,
                "metadata": {
                  "goal_id": 45,
                  "goal_title": "–û—Å–≤–æ–∏—Ç—å Vue 3"
                }
              },
              {
                "type": "journal_entry",
                "amount": 10,
                "metadata": {
                  "diary_id": 78
                }
              }
            ]
          }
        ]
      }
    ]
  }
}
```

### 4. –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

#### –ó–∞–≤–µ—Ä—à–µ–Ω–∏–µ —à–∞–≥–∞ —Ü–µ–ª–∏

```javascript
// –û—Ç–º–µ—Ç–∫–∞ —à–∞–≥–∞ –∫–∞–∫ –≤—ã–ø–æ–ª–Ω–µ–Ω–Ω–æ–≥–æ
const response = await api.post('/api/rest/front/app/goals/steps/update/', {
  goals_steps_data: [
    {
      goal_id: 123,
      step_id: 456,
      is_complete: true  // ‚Üê –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –Ω–∞—á–∏—Å–ª–∏—Ç—Å—è +25 XP
    }
  ]
});

// –ë–∞–ª–∞–Ω—Å XP –æ–±–Ω–æ–≤–∏—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏
// –ù–æ–≤–∞—è —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—è –ø–æ—è–≤–∏—Ç—Å—è –≤ –∏—Å—Ç–æ—Ä–∏–∏
```

#### –ó–∞–≤–µ—Ä—à–µ–Ω–∏–µ —Ü–µ–ª–∏

```javascript
// –ó–∞–≤–µ—Ä—à–µ–Ω–∏–µ —Ü–µ–ª–∏
const response = await api.post('/api/rest/front/app/goals/update/', {
  goals_data: [],
  deleted_goals_ids: [],
  completed_goals_ids: [123]  // ‚Üê –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –Ω–∞—á–∏—Å–ª–∏—Ç—Å—è +150 XP
});
```

#### –°–æ–∑–¥–∞–Ω–∏–µ –∑–∞–ø–∏—Å–∏ –≤ –¥–Ω–µ–≤–Ω–∏–∫–µ

```javascript
// –°–æ–∑–¥–∞–Ω–∏–µ –ù–û–í–û–ô –∑–∞–ø–∏—Å–∏ (diary_id –Ω–µ –ø–µ—Ä–µ–¥–∞–µ—Ç—Å—è)
const response = await api.post('/api/rest/front/app/diary/update/', {
  // diary_id: null,  // ‚Üê –ù–µ –ø–µ—Ä–µ–¥–∞–µ–º –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è
  what_done: '–í—ã–ø–æ–ª–Ω–∏–ª –∑–∞–¥–∞—á–∏',
  reflection: '–ë—ã–ª –ø—Ä–æ–¥—É–∫—Ç–∏–≤–Ω—ã–π –¥–µ–Ω—å'
  // ‚Üê –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –Ω–∞—á–∏—Å–ª–∏—Ç—Å—è +10 XP
});

// –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–π –∑–∞–ø–∏—Å–∏ (XP –ù–ï –Ω–∞—á–∏—Å–ª—è–µ—Ç—Å—è)
const response = await api.post('/api/rest/front/app/diary/update/', {
  diary_id: 78,  // ‚Üê –ü–µ—Ä–µ–¥–∞–µ–º –¥–ª—è —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
  what_done: '–û–±–Ω–æ–≤–ª–µ–Ω–Ω—ã–π —Ç–µ–∫—Å—Ç'
  // ‚Üê XP –Ω–µ –Ω–∞—á–∏—Å–ª—è–µ—Ç—Å—è –ø—Ä–∏ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–∏
});
```

## UI/UX —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏

### 1. –í–∏–∑—É–∞–ª—å–Ω–∞—è –æ–±—Ä–∞—Ç–Ω–∞—è —Å–≤—è–∑—å

–†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –ø–æ–∫–∞–∑—ã–≤–∞—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –ø—Ä–∏ –ø–æ–ª—É—á–µ–Ω–∏–∏ XP:

```
‚ú® +25 XP –∑–∞ –∑–∞–≤–µ—Ä—à–µ–Ω–∏–µ —à–∞–≥–∞ —Ü–µ–ª–∏!
üéØ +150 XP –∑–∞ –∑–∞–≤–µ—Ä—à–µ–Ω–∏–µ —Ü–µ–ª–∏ "–û—Å–≤–æ–∏—Ç—å Vue 3"!
üìù +10 XP –∑–∞ –∑–∞–ø–∏—Å—å –≤ –¥–Ω–µ–≤–Ω–∏–∫!
```

### 2. –ü—Ä–æ–≥—Ä–µ—Å—Å-–±–∞—Ä XP

–û–±–Ω–æ–≤–∏—Ç–µ –±–∞–ª–∞–Ω—Å XP –ø–æ—Å–ª–µ –∫–∞–∂–¥–æ–π –æ–ø–µ—Ä–∞—Ü–∏–∏. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –¥–æ–ª–∂–Ω—ã –≤–∏–¥–µ—Ç—å –Ω–µ–º–µ–¥–ª–µ–Ω–Ω—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç —Å–≤–æ–∏—Ö –¥–µ–π—Å—Ç–≤–∏–π.

### 3. –§–∏–ª—å—Ç—Ä—ã –∏—Å—Ç–æ—Ä–∏–∏

–î–æ–±–∞–≤—å—Ç–µ —Ñ–∏–ª—å—Ç—Ä "–¶–µ–ª–∏" –¥–ª—è –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ —Ç–æ–ª—å–∫–æ XP –æ—Ç —Ü–µ–ª–µ–π –∏ —à–∞–≥–æ–≤:

```javascript
// –ü–æ–ª—É—á–∏—Ç—å —Ç–æ–ª—å–∫–æ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏ –ø–æ —Ü–µ–ª—è–º
const response = await api.post('/api/rest/front/app/habits/xp/history-grouped/', {
  transaction_category_filter: 'goals'  // ‚Üê –ù–æ–≤—ã–π —Ñ–∏–ª—å—Ç—Ä
});
```

## –ë–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞

### –ò–¥–µ–º–ø–æ—Ç–µ–Ω—Ç–Ω–æ—Å—Ç—å

- –ü–æ–≤—Ç–æ—Ä–Ω–æ–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏–µ —à–∞–≥–∞/—Ü–µ–ª–∏ –ù–ï –Ω–∞—á–∏—Å–ª—è–µ—Ç XP –ø–æ–≤—Ç–æ—Ä–Ω–æ
- XP –Ω–∞—á–∏—Å–ª—è–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –ø—Ä–∏ **–∏–∑–º–µ–Ω–µ–Ω–∏–∏** —Å—Ç–∞—Ç—É—Å–∞ —Å `false` –Ω–∞ `true` –∏–ª–∏ –Ω–∞ `complete`

### –û—Ç–º–µ–Ω–∞ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è

**–í–ê–ñ–ù–û: XP –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ—Ç–º–µ–Ω—è–µ—Ç—Å—è –ø—Ä–∏ –æ—Ç–º–µ–Ω–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è!**

- –ï—Å–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —Å–Ω–∏–º–∞–µ—Ç –æ—Ç–º–µ—Ç–∫—É –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è —à–∞–≥–∞ (`is_complete: false`), –Ω–∞—á–∏—Å–ª–µ–Ω–Ω—ã–µ –∑–∞ —ç—Ç–æ—Ç —à–∞–≥ **+25 XP –æ—Ç–º–µ–Ω—è—é—Ç—Å—è**
- –ï—Å–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –º–µ–Ω—è–µ—Ç —Å—Ç–∞—Ç—É—Å —Ü–µ–ª–∏ —Å `complete` –Ω–∞ –¥—Ä—É–≥–æ–π —Å—Ç–∞—Ç—É—Å, –Ω–∞—á–∏—Å–ª–µ–Ω–Ω—ã–µ –∑–∞ —ç—Ç—É —Ü–µ–ª—å **+150 XP –æ—Ç–º–µ–Ω—è—é—Ç—Å—è**
- –ü—Ä–∏ –æ—Ç–º–µ–Ω–µ XP:
  - –û—Ä–∏–≥–∏–Ω–∞–ª—å–Ω–∞—è —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—è –ø–æ–º–µ—á–∞–µ—Ç—Å—è –∫–∞–∫ `is_reversed: true`
  - –°–æ–∑–¥–∞–µ—Ç—Å—è –æ–±—Ä–∞—Ç–Ω–∞—è —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—è —Å –æ—Ç—Ä–∏—Ü–∞—Ç–µ–ª—å–Ω–æ–π —Å—É–º–º–æ–π (–Ω–∞–ø—Ä–∏–º–µ—Ä, -25 XP)
  - **–û–±–µ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏ (–æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω–∞—è –∏ –æ–±—Ä–∞—Ç–Ω–∞—è) –ù–ï –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è –≤ –∏—Å—Ç–æ—Ä–∏–∏**
  - –ë–∞–ª–∞–Ω—Å XP –∫–æ—Ä—Ä–µ–∫—Ç–∏—Ä—É–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏

### –£–¥–∞–ª–µ–Ω–∏–µ –∑–∞–ø–∏—Å–µ–π

**–í–ê–ñ–ù–û: XP –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ—Ç–º–µ–Ω—è–µ—Ç—Å—è –ø—Ä–∏ —É–¥–∞–ª–µ–Ω–∏–∏ –∑–∞–ø–∏—Å–∏ –¥–Ω–µ–≤–Ω–∏–∫–∞!**

- –ü—Ä–∏ —É–¥–∞–ª–µ–Ω–∏–∏ –∑–∞–ø–∏—Å–∏ –¥–Ω–µ–≤–Ω–∏–∫–∞ –Ω–∞—á–∏—Å–ª–µ–Ω–Ω—ã–µ –∑–∞ –Ω–µ—ë **+10 XP –æ—Ç–º–µ–Ω—è—é—Ç—Å—è**
- –ü—Ä–∏ –æ—Ç–º–µ–Ω–µ XP –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —Ç–æ—Ç –∂–µ –º–µ—Ö–∞–Ω–∏–∑–º: –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω–∞—è —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—è –ø–æ–º–µ—á–∞–µ—Ç—Å—è –∫–∞–∫ –æ—Ç–º–µ–Ω–µ–Ω–Ω–∞—è, —Å–æ–∑–¥–∞–µ—Ç—Å—è –æ–±—Ä–∞—Ç–Ω–∞—è —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—è
- **–¢—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏ —Å —Ñ–ª–∞–≥–æ–º `is_reversed: true` –Ω–µ –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è –≤ –∏—Å—Ç–æ—Ä–∏–∏ XP**
- –£–¥–∞–ª–µ–Ω–∏–µ —à–∞–≥–∞ –∏–ª–∏ —Ü–µ–ª–∏ (—á–µ—Ä–µ–∑ `date_deleted`) –ù–ï –æ—Ç–º–µ–Ω—è–µ—Ç XP - –æ—Ç–º–µ–Ω–∞ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç —Ç–æ–ª—å–∫–æ –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ —Å—Ç–∞—Ç—É—Å–∞ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è

## –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–µ—Ç–∞–ª–∏

### –ú–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π

–ö–∞–∂–¥–∞—è —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—è —Å–æ–¥–µ—Ä–∂–∏—Ç –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –¥–µ—Ç–∞–ª–µ–π:

**goal_step_completed:**
```json
{
  "step_id": 456,
  "step_title": "–ù–∞–∑–≤–∞–Ω–∏–µ —à–∞–≥–∞"
}
```

**goal_completed:**
```json
{
  "goal_id": 123,
  "goal_title": "–ù–∞–∑–≤–∞–Ω–∏–µ —Ü–µ–ª–∏"
}
```

**journal_entry:**
```json
{
  "diary_id": 78
}
```

### –ú–µ—Ö–∞–Ω–∏–∑–º –æ—Ç–º–µ–Ω—ã XP (Reversal)

–ö–æ–≥–¥–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –æ—Ç–º–µ–Ω—è–µ—Ç –¥–µ–π—Å—Ç–≤–∏–µ (—Å–Ω–∏–º–∞–µ—Ç –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ —à–∞–≥–∞, –º–µ–Ω—è–µ—Ç —Å—Ç–∞—Ç—É—Å —Ü–µ–ª–∏, —É–¥–∞–ª—è–µ—Ç –¥–Ω–µ–≤–Ω–∏–∫), —Å–∏—Å—Ç–µ–º–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ—Ç–º–µ–Ω—è–µ—Ç —Å–≤—è–∑–∞–Ω–Ω—ã–µ XP —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏:

**–ü—Ä–æ—Ü–µ—Å—Å –æ—Ç–º–µ–Ω—ã:**

1. **–ü–æ–∏—Å–∫ –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω–æ–π —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏** - –ø–æ —Ç–∏–ø—É –∏ –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–º (–Ω–∞–ø—Ä–∏–º–µ—Ä, `transaction_type='goal_step_completed'` + `metadata.step_id=456`)

2. **–ü–æ–º–µ—Ç–∫–∞ –∫–∞–∫ –æ—Ç–º–µ–Ω–µ–Ω–Ω–æ–π** - –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω–∞—è —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—è –ø–æ–ª—É—á–∞–µ—Ç —Ñ–ª–∞–≥ `is_reversed: true`

3. **–°–æ–∑–¥–∞–Ω–∏–µ –æ–±—Ä–∞—Ç–Ω–æ–π —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏** - –Ω–æ–≤–∞—è —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—è —Å:
   - –û—Ç—Ä–∏—Ü–∞—Ç–µ–ª—å–Ω–æ–π —Å—É–º–º–æ–π (–Ω–∞–ø—Ä–∏–º–µ—Ä, -25 –¥–ª—è —à–∞–≥–∞)
   - –¢–µ–º –∂–µ —Ç–∏–ø–æ–º (`goal_step_completed`)
   - –ú–µ—Ç–∞–¥–∞–Ω–Ω—ã–º–∏ –æ—Ä–∏–≥–∏–Ω–∞–ª–∞ + `reversed_transaction_id` + `reason: 'reversed'`
   - –§–ª–∞–≥–æ–º `is_reversed: true`

4. **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –∫–æ—Ä—Ä–µ–∫—Ü–∏—è –±–∞–ª–∞–Ω—Å–∞** - `xp_balance` –∏ `lifetime_xp` –æ–±–Ω–æ–≤–ª—è—é—Ç—Å—è

**–§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –≤ –∏—Å—Ç–æ—Ä–∏–∏:**

–≠–Ω–¥–ø–æ–∏–Ω—Ç `/api/rest/front/app/habits/xp/history-grouped/` –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Ñ–∏–ª—å—Ç—Ä—É–µ—Ç —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏ —Å `is_reversed=True`, –ø–æ—ç—Ç–æ–º—É:
- –§—Ä–æ–Ω—Ç–µ–Ω–¥—É **–ù–ï –Ω—É–∂–Ω–æ** –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ —Ñ–∏–ª—å—Ç—Ä–æ–≤–∞—Ç—å —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏
- –û—Ç–º–µ–Ω–µ–Ω–Ω—ã–µ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏ **–Ω–µ –ø–æ—è–≤–ª—è—é—Ç—Å—è** –≤ –æ—Ç–≤–µ—Ç–µ API
- –ò—Å—Ç–æ—Ä–∏—è –≤—Å–µ–≥–¥–∞ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç —Ç–æ–ª—å–∫–æ –∞–∫—Ç—É–∞–ª—å–Ω—ã–µ (–Ω–µ –æ—Ç–º–µ–Ω–µ–Ω–Ω—ã–µ) –Ω–∞—á–∏—Å–ª–µ–Ω–∏—è/—Å–ø–∏—Å–∞–Ω–∏—è

**–ü—Ä–∏–º–µ—Ä—ã —Å—Ü–µ–Ω–∞—Ä–∏–µ–≤:**

```javascript
// –°—Ü–µ–Ω–∞—Ä–∏–π 1: –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –∑–∞–≤–µ—Ä—à–∏–ª —à–∞–≥, –∑–∞—Ç–µ–º —Å–Ω—è–ª –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ
// 1. POST /api/rest/front/app/goals/steps/update/
{
  goals_steps_data: [{ step_id: 456, is_complete: true }]  // +25 XP
}
// –í –ë–î —Å–æ–∑–¥–∞–Ω–∞ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—è: {id: 1001, amount: 25, is_reversed: false, metadata: {step_id: 456}}

// 2. POST /api/rest/front/app/goals/steps/update/
{
  goals_steps_data: [{ step_id: 456, is_complete: false }]  // –û—Ç–º–µ–Ω–∞ +25 XP
}
// –í –ë–î:
// - –¢—Ä–∞–Ω–∑–∞–∫—Ü–∏—è #1001: {is_reversed: true} (–ø–æ–º–µ—á–µ–Ω–∞)
// - –ù–æ–≤–∞—è —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—è: {amount: -25, is_reversed: true, metadata: {step_id: 456, reversed_transaction_id: 1001}}

// 3. GET /api/rest/front/app/habits/xp/history-grouped/
// –û—Ç–≤–µ—Ç –ù–ï —Å–æ–¥–µ—Ä–∂–∏—Ç –Ω–∏ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—é #1001, –Ω–∏ –æ–±—Ä–∞—Ç–Ω—É—é —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—é
```

### –≠–Ω–¥–ø–æ–∏–Ω—Ç—ã

–ù–∏–∫–∞–∫–∏—Ö –∏–∑–º–µ–Ω–µ–Ω–∏–π –≤ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö —ç–Ω–¥–ø–æ–∏–Ω—Ç–∞—Ö –Ω–µ —Ç—Ä–µ–±—É–µ—Ç—Å—è. –í—Å–µ —Ä–∞–±–æ—Ç–∞–µ—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —á–µ—Ä–µ–∑:

- `POST /api/rest/front/app/goals/steps/update/`
- `POST /api/rest/front/app/goals/update/`
- `POST /api/rest/front/app/diary/update/`
- `POST /api/rest/front/app/habits/xp/history-grouped/`

## –ú–∏–≥—Ä–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö

–ú–∏–≥—Ä–∞—Ü–∏—è –ù–ï —Ç—Ä–µ–±—É–µ—Ç—Å—è ‚Äî —Ç–∏–ø—ã —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π —É–∂–µ —Å—É—â–µ—Å—Ç–≤–æ–≤–∞–ª–∏ –≤ –º–æ–¥–µ–ª–∏.

## –í–æ–ø—Ä–æ—Å—ã –∏ –æ—Ç–≤–µ—Ç—ã

**Q: –ú–æ–∂–Ω–æ –ª–∏ –æ—Ç–∫–ª—é—á–∏—Ç—å –Ω–∞—á–∏—Å–ª–µ–Ω–∏–µ XP –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è?**
A: –ù–µ—Ç, —ç—Ç–æ —á–∞—Å—Ç—å –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∏. –î–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Ç–µ—Å—Ç–æ–≤—É—é –ë–î.

**Q: –ß—Ç–æ –µ—Å–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –∑–∞–≤–µ—Ä—à–∏–ª —Ü–µ–ª—å, –Ω–æ –Ω–µ –∑–∞–≤–µ—Ä—à–∏–ª –≤—Å–µ —à–∞–≥–∏?**
A: –≠—Ç–æ –¥–æ–ø—É—Å—Ç–∏–º–æ. XP –Ω–∞—á–∏—Å–ª—è–µ—Ç—Å—è –∑–∞ –∑–∞–≤–µ—Ä—à–µ–Ω–∏–µ —Ü–µ–ª–∏ –Ω–µ–∑–∞–≤–∏—Å–∏–º–æ –æ—Ç —à–∞–≥–æ–≤.

**Q: –ù–∞—á–∏—Å–ª—è–µ—Ç—Å—è –ª–∏ XP –ø—Ä–∏ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–∏ –¥–Ω–µ–≤–Ω–∏–∫–∞?**
A: –ù–µ—Ç, —Ç–æ–ª—å–∫–æ –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ –Ω–æ–≤–æ–π –∑–∞–ø–∏—Å–∏.

**Q: –ß—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç —Å XP, –µ—Å–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —Å–Ω–∏–º–∞–µ—Ç –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ —à–∞–≥–∞?**
A: XP –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ—Ç–º–µ–Ω—è–µ—Ç—Å—è. –û—Ä–∏–≥–∏–Ω–∞–ª—å–Ω–∞—è —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—è –ø–æ–º–µ—á–∞–µ—Ç—Å—è –∫–∞–∫ –æ—Ç–º–µ–Ω–µ–Ω–Ω–∞—è (`is_reversed=true`), —Å–æ–∑–¥–∞–µ—Ç—Å—è –æ–±—Ä–∞—Ç–Ω–∞—è —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—è —Å –æ—Ç—Ä–∏—Ü–∞—Ç–µ–ª—å–Ω–æ–π —Å—É–º–º–æ–π, –∏ –æ–±–µ –ù–ï –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è –≤ –∏—Å—Ç–æ—Ä–∏–∏.

**Q: –ï—Å–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–µ—Å–∫–æ–ª—å–∫–æ —Ä–∞–∑ –∑–∞–≤–µ—Ä—à–∞–µ—Ç –∏ –æ—Ç–º–µ–Ω—è–µ—Ç –æ–¥–∏–Ω –∏ —Ç–æ—Ç –∂–µ —à–∞–≥, –±—É–¥–µ—Ç –ª–∏ –Ω–∞–∫–∞–ø–ª–∏–≤–∞—Ç—å—Å—è XP?**
A: –ù–µ—Ç. –ü—Ä–∏ –∫–∞–∂–¥–æ–º –∑–∞–≤–µ—Ä—à–µ–Ω–∏–∏ –Ω–∞—á–∏—Å–ª—è–µ—Ç—Å—è XP, –ø—Ä–∏ –∫–∞–∂–¥–æ–π –æ—Ç–º–µ–Ω–µ - –æ—Ç–º–µ–Ω—è–µ—Ç—Å—è. –°–∏—Å—Ç–µ–º–∞ –æ—Ç—Å–ª–µ–∂–∏–≤–∞–µ—Ç —Ç–æ–ª—å–∫–æ —Ç–µ–∫—É—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ, –∑–ª–æ—É–ø–æ—Ç—Ä–µ–±–ª–µ–Ω–∏—è –Ω–µ–≤–æ–∑–º–æ–∂–Ω—ã.

**Q: –í–∏–¥–∏—Ç –ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –æ—Ç–º–µ–Ω–µ–Ω–Ω—ã–µ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏ –≤ –∏—Å—Ç–æ—Ä–∏–∏?**
A: –ù–µ—Ç. –≠–Ω–¥–ø–æ–∏–Ω—Ç `/api/rest/front/app/habits/xp/history-grouped/` –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Ñ–∏–ª—å—Ç—Ä—É–µ—Ç –≤—Å–µ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏ —Å —Ñ–ª–∞–≥–æ–º `is_reversed=true`.

**Q: –ß—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –ø—Ä–∏ —É–¥–∞–ª–µ–Ω–∏–∏ –∑–∞–ø–∏—Å–∏ –¥–Ω–µ–≤–Ω–∏–∫–∞?**
A: –ù–∞—á–∏—Å–ª–µ–Ω–Ω—ã–µ –∑–∞ —ç—Ç—É –∑–∞–ø–∏—Å—å +10 XP –æ—Ç–º–µ–Ω—è—é—Ç—Å—è –ø–æ —Ç–æ–º—É –∂–µ –º–µ—Ö–∞–Ω–∏–∑–º—É (reversal).

**Q: –û—Ç–º–µ–Ω—è–µ—Ç—Å—è –ª–∏ XP –ø—Ä–∏ –º—è–≥–∫–æ–º —É–¥–∞–ª–µ–Ω–∏–∏ (soft delete) —à–∞–≥–∞ –∏–ª–∏ —Ü–µ–ª–∏?**
A: –ù–µ—Ç. XP –æ—Ç–º–µ–Ω—è–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ —Å—Ç–∞—Ç—É—Å–∞ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è (`is_complete: false` –¥–ª—è —à–∞–≥–æ–≤, –∏–ª–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–µ `status` —Å `complete` –¥–ª—è —Ü–µ–ª–µ–π). –ü—Ä–æ—Å—Ç–æ–µ —É–¥–∞–ª–µ–Ω–∏–µ —á–µ—Ä–µ–∑ `date_deleted` –Ω–µ –≤–ª–∏—è–µ—Ç –Ω–∞ XP.

## –ö–æ–Ω—Ç–∞–∫—Ç—ã

–ü–æ –≤–æ–ø—Ä–æ—Å–∞–º –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏: backend team
