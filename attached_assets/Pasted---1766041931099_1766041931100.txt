Теперь займемся большой задачей связанной с тарифами и подписками.

Я ставил задачу для бекенда:
```text
Общие тезисы:
- данные по тарифам лежат  в бд
- есть тариф "триал" на неделю доступ для юзера бесплатен - сразу после авторизации активация
- нужно заложить скидку при оплате за больший период за один раз (к примеру при оплате за год, скдика 20%), и размером этой скидки можно управлять.
- пользователь может перейти с большего тарифа на меньший, при этом за выбранный период меньшего тарифа, ему нужно будет заплатить меньше (т.е. доступен перерасчет, но для новых покупок)
- аналогично: юзер может перейти с меньшего тарифа на больший, но с перерасчетом цены для большего (т.е. при формирование цены для большего тарифа, должно учитываться сколько денег должна быть скидка, за не использованые дни при старом тарифе)
- должна быть возможность использовать промокоды
- у юзера должно быть: корзина, элемент корзины, элемент биллинга, подписка, оплата подписки (возможно нужны корректировки, но это на твое усмотрение)
- я буду также использовать robokassa (поэтому код работы с ней, лучше взять полностью из примеров кода ниже)
- продумать эндпоинты для работы с тарифами пользователем, урлы для совершения оплаты, перехода в робокассу, и возврата из нее
- логировать все дейтсвия и события
```

Бек сделал, результат немного отличается от ТЗ для него, но глобально все хорошо.  

Теперь для фронта: Интеграция тарифной системы и оплаты                                                                                       
                                                                                                                                 
Реализовать страницы тарифов и оплаты с интеграцией Robokassa.                                                                     
                                                                                                                                 
Что нужно сделать                                                                                                                  
                                                                                                                                 
1. На Лендинг (главной странице) — блок тарифов                                                                                                          
- Эндпоинт: POST /api/rest/front/land/tariffs/get/ (без авторизации)                                                               
- Показать 3 тарифа с ценами по периодам                                                                                           
  - Период с is_hit: true (3 мес) выделить как рекомендуемый
Тут лучше подумать как будет лучше. Текущий вариант, который сделан на лендинге, меня устраивает, его нужно лишь интегрировать с получением данных из бэкенда.
                                                                                                                                 
2. Страница тарифов /billing (авторизованные)                                                                                      
- Эндпоинт: POST /api/rest/front/app/tariffs/get/                                                                                  
- Показать текущую подписку: POST /app/subscription/get/                                                                           
- Поле для ввода промокода: POST /app/promocode/activate/                                                                          
- После активации промокода цены пересчитываются автоматически                                                                     
                                                                                                                                 
3. Флоу оплаты                                                                                                                     
1. Пользователь выбирает тариф + период                                                                                            
2. /app/payment/calculate/ → показать детализацию цены                                                                             
3. Кнопка "Оплатить" → /app/payment/create/ → получить payment_link                                                                
4. Редирект на Robokassa                                                                                                           
5. После оплаты → /billing/success или /billing/fail                                                                               
                                                                                                                                 
4. Страницы после оплаты в ЛК                                                                                                     
- /app/billing/success?payment_id=X — успех, показать "Спасибо"                                                                        
- /app/billing/fail?payment_id=X — неудача, предложить повторить                                                                       
                                                                                                                                 
5. Проверка доступа                                                                                                                
- subscription.is_trial — во время триала полный доступ                                                                            
- subscription.tariff.code === 'free' — блокировать AI-функции                                                                     
- При попытке использовать AI на Free — модалка "Перейти на Pro"                                                                   
                                                                                                                                 
Ключевые моменты                                                                                                                   
                                                                                                                                 
- Триал 7 дней с Pro-доступом сразу после регистрации                                                                              
- 4 периода: 1/3/6/12 месяцев со скидками 0-20%                                                                                    
- Промокод применяется к следующему платежу                                                                                        
- Лимиты Free: 3 цели, 5 привычек, 10 записей дневника/месяц                                                                       
                                                                                                                                 
Подробная документация: `billing_system.md`