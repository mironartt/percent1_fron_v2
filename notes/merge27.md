# Merge 27: AI-–ø–æ–¥–±–æ—Ä –Ω–∞–≥—Ä–∞–¥ (Rewards Suggestions)

**–î–∞—Ç–∞:** 10 –¥–µ–∫–∞–±—Ä—è 2025

---

## –û–±–∑–æ—Ä

–î–æ–±–∞–≤–ª–µ–Ω–∞ —Ñ—É–Ω–∫—Ü–∏—è AI-–ø–æ–¥–±–æ—Ä–∞ –Ω–∞–≥—Ä–∞–¥ –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ "–î–æ—Å—Ç–∏–∂–µ–Ω–∏—è". AI-–º–µ–Ω—Ç–æ—Ä –∞–Ω–∞–ª–∏–∑–∏—Ä—É–µ—Ç —Ü–µ–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è, –¥–∞–Ω–Ω—ã–µ –°–°–ü, –∏–Ω—Ç–µ—Ä–µ—Å—ã –∏ –∑–æ–Ω—ã —Ä–æ—Å—Ç–∞ –¥–ª—è –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è –ø–µ—Ä—Å–æ–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –Ω–∞–≥—Ä–∞–¥.

---

## –ò–∑–º–µ–Ω—ë–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã

### 1. `src/components/RewardWishlist.vue`

#### –ù–æ–≤—ã–π —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª:

**Template:**
- –î–æ–±–∞–≤–ª–µ–Ω–∞ –∫–Ω–æ–ø–∫–∞ "–ü–æ–¥–±–æ—Ä –æ—Ç –º–µ–Ω—Ç–æ—Ä–∞" —Å –∏–∫–æ–Ω–∫–æ–π Sparkles –≤ —Å–µ–∫—Ü–∏–∏ –∑–∞–≥–æ–ª–æ–≤–∫–∞ —Ä—è–¥–æ–º —Å "+"
- –°–æ–∑–¥–∞–Ω AI-–º–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ —Å 5 —Å–æ—Å—Ç–æ—è–Ω–∏—è–º–∏:
  - **Intro**: –û–ø–∏—Å–∞–Ω–∏–µ —Ñ—É–Ω–∫—Ü–∏–∏ —Å 4 –±—É–ª–ª–∏—Ç–∞–º–∏ (–≤–µ—Ä—Ç–∏–∫–∞–ª—å–Ω—ã–π layout)
  - **Loading**: –°–ø–∏–Ω–Ω–µ—Ä + "AI –∞–Ω–∞–ª–∏–∑–∏—Ä—É–µ—Ç –≤–∞—à –ø—Ä–æ—Ñ–∏–ª—å..."
  - **Selection**: 3 –∫–∞—Ä—Ç–æ—á–∫–∏ –Ω–∞–≥—Ä–∞–¥ —Å —á–µ–∫–±–æ–∫—Å–∞–º–∏ –¥–ª—è –≤—ã–±–æ—Ä–∞
  - **Confirmation**: –°–ø–∏—Å–æ–∫ –¥–æ–±–∞–≤–ª–µ–Ω–Ω—ã—Ö –Ω–∞–≥—Ä–∞–¥
  - **Error**: –ö–Ω–æ–ø–∫–∏ "–î–æ–±–∞–≤–∏—Ç—å –≤—Ä—É—á–Ω—É—é" –∏ "–ü–æ–ø—Ä–æ–±–æ–≤–∞—Ç—å —Å–Ω–æ–≤–∞"

**Script:**
- –ù–æ–≤—ã–µ –∏–º–ø–æ—Ä—Ç—ã: `Sparkles, Target, TrendingUp, Coins, CheckCircle, AlertTriangle`
- –ù–æ–≤—ã–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è:
  ```javascript
  showAiSuggestionsModal = ref(false)
  aiSuggestionsStep = ref('intro')
  aiSuggestedRewards = ref([])
  selectedAiRewards = ref([])
  createdAiRewards = ref([])
  aiSuggestionsErrorMessage = ref('')
  skipRewardSuggestionsIntro = ref(false)
  ```
- –ù–æ–≤—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏:
  - `openAiSuggestionsModal()` - –æ—Ç–∫—Ä—ã—Ç–∏–µ –º–æ–¥–∞–ª–∫–∏
  - `startAiSuggestions()` - –∑–∞–ø—É—Å–∫ AI-–ø–æ–¥–±–æ—Ä–∞
  - `prepareUserDataForRewards()` - –ø–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –¥–∞–Ω–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
  - `toggleAiRewardSelection(index)` - –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –≤—ã–±–æ—Ä–∞ –Ω–∞–≥—Ä–∞–¥—ã
  - `confirmAiRewardSelection()` - –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ –∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤—ã–±—Ä–∞–Ω–Ω—ã—Ö –Ω–∞–≥—Ä–∞–¥
  - `closeAiSuggestionsModal()` - –∑–∞–∫—Ä—ã—Ç–∏–µ –º–æ–¥–∞–ª–∫–∏
  - `openManualAddModal()` - fallback –Ω–∞ —Ä—É—á–Ω–æ–µ –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ
  - `saveSkipIntroPreference()` - —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —Ñ–ª–∞–≥–∞ "–Ω–µ –ø–æ–∫–∞–∑—ã–≤–∞—Ç—å"

**CSS:**
- `.header-actions` - –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –¥–ª—è –∫–Ω–æ–ø–æ–∫ –≤ –∑–∞–≥–æ–ª–æ–≤–∫–µ
- `.btn-icon-ai` - —Å—Ç–∏–ª—å –¥–ª—è AI-–∫–Ω–æ–ø–∫–∏ (–∑–µ–ª—ë–Ω—ã–π —Ü–≤–µ—Ç #10b981)
- `.ai-suggestions-modal` - —Å—Ç–∏–ª–∏ –º–æ–¥–∞–ª—å–Ω–æ–≥–æ –æ–∫–Ω–∞
- `.ai-intro-section`, `.ai-loading-section`, `.ai-selection-section` - —Å–µ–∫—Ü–∏–∏ —Å–æ—Å—Ç–æ—è–Ω–∏–π
- `.ai-reward-card`, `.ai-reward-header`, `.ai-reward-info` - –∫–∞—Ä—Ç–æ—á–∫–∏ –Ω–∞–≥—Ä–∞–¥
- `.ai-features` - –∏–∑–º–µ–Ω–µ–Ω–æ —Å grid 2x2 –Ω–∞ flex-column (–≤–µ—Ä—Ç–∏–∫–∞–ª—å–Ω—ã–π layout)
- `.ai-confirmation-section`, `.ai-error-section` - —Å–µ–∫—Ü–∏–∏ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è –∏ –æ—à–∏–±–∫–∏

---

### 2. `server/aiProxy.js`

**–ù–æ–≤—ã–π endpoint:** `POST /api/ai/suggest-rewards`

```javascript
app.post('/api/ai/suggest-rewards', async (req, res) => {
  // –ü–æ–ª—É—á–∞–µ—Ç –¥–∞–Ω–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è: spheres, growthZones, goals, existingRewards, xpBalance
  // –û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –∑–∞–ø—Ä–æ—Å –∫ OpenAI —Å –ø—Ä–æ–º–ø—Ç–æ–º –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ 3 –ø–µ—Ä—Å–æ–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –Ω–∞–≥—Ä–∞–¥
  // –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç –º–∞—Å—Å–∏–≤ suggestions —Å –ø–æ–ª—è–º–∏: name, icon, whyMotivating, cost, description
})
```

**–°–∏—Å—Ç–µ–º–Ω—ã–π –ø—Ä–æ–º–ø—Ç:**
- –†–æ–ª—å: AI-–º–µ–Ω—Ç–æ—Ä –¥–ª—è –ø–æ–¥–±–æ—Ä–∞ –Ω–∞–≥—Ä–∞–¥
- –ê–Ω–∞–ª–∏–∑–∏—Ä—É–µ—Ç: —Ü–µ–ª–∏, –°–°–ü, –∑–æ–Ω—ã —Ä–æ—Å—Ç–∞, –∏–Ω—Ç–µ—Ä–µ—Å—ã
- –ü—Ä–∞–≤–∏–ª–∞:
  - –†–æ–≤–Ω–æ 3 –Ω–∞–≥—Ä–∞–¥—ã
  - –°–≤—è–∑—å —Å –∏–Ω—Ç–µ—Ä–µ—Å–∞–º–∏ –∏ –∑–æ–Ω–∞–º–∏ —Ä–æ—Å—Ç–∞
  - –ó–¥–æ—Ä–æ–≤—å–µ ‚Üí –º–∞—Å—Å–∞–∂, —Ñ–∏—Ç–Ω–µ—Å
  - –ö–∞—Ä—å–µ—Ä–∞ ‚Üí –∫—É—Ä—Å—ã, –∫–Ω–∏–≥–∏
  - –û—Ç–Ω–æ—à–µ–Ω–∏—è ‚Üí —Å–æ–≤–º–µ—Å—Ç–Ω—ã–µ –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏
  - –°—Ç–æ–∏–º–æ—Å—Ç—å 100-2000 XP
  - –ù–µ –¥—É–±–ª–∏—Ä–æ–≤–∞—Ç—å —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ

---

### 3. `docs/ai-mentor-master-spec.md`

**–î–æ–±–∞–≤–ª–µ–Ω–∞ —Å–µ–∫—Ü–∏—è 17.6: AI –ü–æ–¥–±–æ—Ä –Ω–∞–≥—Ä–∞–¥ (Rewards Suggestions)**

–°–æ–¥–µ—Ä–∂–∏—Ç:
- –ú–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ (endpoint, –∫–æ–º–ø–æ–Ω–µ–Ω—Ç, —Ç—Ä–∏–≥–≥–µ—Ä)
- User Story
- –í—Ö–æ–¥–Ω—ã–µ/–≤—ã—Ö–æ–¥–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ (JSON —Å—Ö–µ–º—ã)
- UI/UX Flow (5 —à–∞–≥–æ–≤)
- –§–∏—á–∏ intro —ç–∫—Ä–∞–Ω–∞
- –ü—Ä–∞–≤–∏–ª–∞ AI

---

## UI/UX —Ä–µ—à–µ–Ω–∏—è

| –≠–ª–µ–º–µ–Ω—Ç | –†–µ—à–µ–Ω–∏–µ |
|---------|---------|
| –¶–≤–µ—Ç | –ó–µ–ª—ë–Ω—ã–π #10b981 (–µ–¥–∏–Ω—ã–π –¥–ª—è –≤—Å–µ—Ö AI-—Ñ—É–Ω–∫—Ü–∏–π) |
| –ò–∫–æ–Ω–∫–∞ | Sparkles (–∏—Å–∫—Ä—ã) |
| –ö–Ω–æ–ø–∫–∞ | –†—è–¥–æ–º —Å "+" –≤ –∑–∞–≥–æ–ª–æ–≤–∫–µ —Å–µ–∫—Ü–∏–∏ |
| –ë—É–ª–ª–∏—Ç—ã | –í–µ—Ä—Ç–∏–∫–∞–ª—å–Ω—ã–π layout (1 –∫–æ–ª–æ–Ω–∫–∞) |
| –ß–µ–∫–±–æ–∫—Å | "–ù–µ –ø–æ–∫–∞–∑—ã–≤–∞—Ç—å —ç—Ç–æ –æ–∫–Ω–æ —Å–Ω–æ–≤–∞" —Å localStorage |
| Fallback | –ü—Ä–∏ –æ—à–∏–±–∫–µ ‚Üí —Ä—É—á–Ω–æ–µ –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–∞–≥—Ä–∞–¥—ã |

---

## –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–µ—Ç–∞–ª–∏

### –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –¥–∞–Ω–Ω—ã—Ö –¥–ª—è AI

```javascript
{
  spheres: [{ id, name, score, reflection }],
  growthZones: [{ id, name, score, desired, prevents }],
  goals: [{ text, sphereId }],
  existingRewards: ["name1", "name2"],
  xpBalance: 500
}
```

### –§–æ—Ä–º–∞—Ç –æ—Ç–≤–µ—Ç–∞ AI

```json
{
  "success": true,
  "suggestions": [
    {
      "name": "–ú–∞—Å—Å–∞–∂",
      "icon": "üíÜ",
      "whyMotivating": "–í—ã —Ä–∞–±–æ—Ç–∞–µ—Ç–µ –Ω–∞–¥ –∑–¥–æ—Ä–æ–≤—å–µ–º...",
      "cost": 500,
      "description": "–†–∞—Å—Å–ª–∞–±–ª—è—é—â–∏–π –º–∞—Å—Å–∞–∂"
    }
  ]
}
```

---

## –ò–∑–≤–µ—Å—Ç–Ω—ã–µ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è

1. **AI Proxy Server** —Ç—Ä–µ–±—É–µ—Ç –Ω–∞—Å—Ç—Ä–æ–µ–Ω–Ω—ã–π `OPENAI_API_KEY` –¥–ª—è —Ä–∞–±–æ—Ç—ã
2. –ü—Ä–∏ –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–∏ API –∫–ª—é—á–∞ –º–æ–¥–∞–ª–∫–∞ –ø–æ–∫–∞–∂–µ—Ç –æ—à–∏–±–∫—É —Å fallback –Ω–∞ —Ä—É—á–Ω–æ–µ –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ

---

## –°–≤—è–∑–∞–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã

- `src/stores/xp.js` - —Ö—Ä–∞–Ω–∏–ª–∏—â–µ XP –∏ –Ω–∞–≥—Ä–∞–¥ (–∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è addReward)
- `src/stores/app.js` - –¥–∞–Ω–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è (–°–°–ü, —Ü–µ–ª–∏)
- `src/services/api.js` - —Ñ—É–Ω–∫—Ü–∏—è apiFetch –¥–ª—è –∑–∞–ø—Ä–æ—Å–æ–≤

---

## –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏ (—Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏)

1. –ù–∞—Å—Ç—Ä–æ–∏—Ç—å `OPENAI_API_KEY` –≤ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è
2. –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ AI-–ø–æ–¥–±–æ—Ä–∞ —Å —Ä–µ–∞–ª—å–Ω—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
3. –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∫–∞—á–µ—Å—Ç–≤–∞ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–π AI
