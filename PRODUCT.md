# OnePercent — Полное описание продукта

## Краткое описание

OnePercent — AI-платформа для личного развития, построенная на принципе "1% ежедневного улучшения = 37x эффективнее за год" (эффект сложного процента). Сервис объединяет AI-наставника, трекинг привычек, управление целями, колесо баланса, дневник рефлексии и геймификацию.

**Стек:** Vue 3 + Pinia + Vite (фронтенд), Django REST (бэкенд)
**Целевая аудитория:** 25-45 лет, профессионалы и предприниматели, ищущие систему личного роста
**Модель:** Freemium + подписка (Free / Pro / Premium)

---

## 1. Основные модули

### 1.1 Дашборд (Главная)
- Приветствие с контекстом времени суток (утро/день/вечер)
- Фокус-задачи дня — выбери 1-3 главные задачи (Quick wins)
- Счётчик стрика дневника
- Бейдж XP — текущий баланс опыта
- Прогресс-бар дня
- Баннер Telegram-бота
- Задачи активации первой недели

**Роут:** `/app`

### 1.2 Колесо баланса (ССП)
Визуальная оценка жизненного баланса по 6 сферам:

| Сфера | Цвет | Backend ID |
|-------|-------|------------|
| Карьера и работа | #6366f1 (Indigo) | `work` |
| Здоровье и спорт | #EF4444 (Red) | `health_sport` |
| Финансы | #10B981 (Green) | `welfare` |
| Любовь и семья | #EC4899 (Pink) | `family` |
| Окружение | #14b8a6 (Teal) | `environment` |
| Хобби | #8B5CF6 (Purple) | `hobby` |

- Интерактивная визуализация колеса (Canvas radar chart)
- Сценарная оценка (не абстрактная шкала 1-10, а описание ситуации)
- Рефлексия по каждой сфере
- Переоценка для отслеживания прогресса

**Роут:** `/app/ssp`

### 1.3 Управление целями
**Банк целей:**
- Создание целей с AI-помощником
- Карточки целей с цветовой привязкой к сферам
- Жизненный цикл: Работа → Выполнено → Архив
- Фильтры: по сфере, статусу, поиск
- Декомпозиция на шаги с оценкой времени
- AI-подсказки для следующих шагов

**Структура цели:**
```
{
  title, description, sphere, status,
  steps: [{ title, description, order, status, scheduled_date, time_estimate }]
}
```

**Роуты:** `/app/goals-bank`, `/app/goals/new`, `/app/goals/:id`

### 1.4 Трекинг привычек
- Создание привычек по категориям и частоте
- Недельная сетка — визуальный трекер на 7 дней
- Стрик-счётчик
- Режимы сложности: Soft / Balanced / Hardcore / Custom

**Геймификация:**
- +5 XP за выполнение привычки
- -10 XP за пропуск (настраивается)
- Система амнистии: 1 бесплатный пропуск в неделю
- Бонусы за стрики: 7 дней +30 XP, 30 дней +100 XP
- Бейджи достижений

**Роут:** `/app/habits`

### 1.5 Планирование
- Недельное планирование с распределением задач по дням
- Календарь с drag-and-drop
- Тайм-блокинг
- AI-распределение нагрузки

**Роуты:** `/app/planning`, `/app/planner`

### 1.6 Дневник рефлексии
- Ежедневные записи с rich-текстом
- Быстрая проверка настроения (1-5 эмодзи)
- Рефлексивные промпты от AI
- История записей
- +10 XP за запись, -10 XP за пропуск

**Роут:** `/app/journal`

### 1.7 Достижения и профиль
- Баланс XP (текущий, за сегодня, за неделю, за всё время)
- Система наград — трата XP на вишлист
- Галерея бейджей
- История транзакций XP с фильтрами

**Роут:** `/app/achievements`

### 1.8 Обучение
- Видеоуроки (RuTube)
- Карточки уроков с прогрессивным открытием
- Темы: постановка целей, формирование привычек, тайм-менеджмент, баланс
- Бейджи за прохождение

**Роут:** `/app/learning`

### 1.9 AI-наставник Саша
**Возможности:**
- Контекстные советы — знает цели, привычки, прогресс пользователя
- Реалтайм-общение через WebSocket
- Индикатор набора текста
- Реакции на сообщения (лайк/дизлайк)
- История разговоров с пагинацией
- Быстрые промпты для новых пользователей

**Техническая реализация:**
- WebSocket для реалтайм-обновлений
- Fallback на REST API
- 50 сообщений на страницу
- Счётчик непрочитанных

**Интерфейс:** Плавающая панель на всех `/app/*` страницах

### 1.10 Подписка и биллинг
**Тарифы:** Free → Pro → Premium (скоро)

- Карточки тарифов с ценами и сравнением
- Промокоды
- Триал с обратным отсчётом
- История платежей
- Гарантия возврата 7 дней

**Роуты:** `/app/subscription`, `/app/billing/success`, `/app/billing/fail`

### 1.11 Реферальная программа
- Персональная реферальная ссылка
- % комиссии с покупок приглашённых
- Аналитика: приглашено, заработано, доступно к выводу

**Роут:** `/app/referral`

### 1.12 Настройки
- Редактирование профиля
- Уведомления (email, ежедневные чекины)
- Привязка Telegram-бота
- Переключение темы (светлая/тёмная)
- Управление аккаунтом

**Роуты:** `/app/settings`, `/app/settings/notifications`

---

## 2. Онбординг

### Новый сценарный онбординг (OnboardingNew.vue)

**Экраны:**
1. **Welcome** — что это за сервис, 6 сфер жизни
2. **Benefits** — что получишь (персональный план, AI-наставник, трекинг, дневник)
3. **Motivation** — что привело сюда:
   - Чувствую застой, хочу двигаться вперёд
   - Хочу больше дисциплины и порядка
   - Есть конкретная цель, не знаю как достичь
   - Хочу баланс между сферами жизни
4. **Scenarios** — оценка 6 сфер через выбор описания ситуации (баллы 2/4/7/9)
5. **Result** — колесо жизни + точка роста + совет от Саши

**Сохранение данных:**
- Мотивация → `reason_joined` через `/api/rest/front/app/onboard/update/`
- Оценки сфер → SSP через `/api/rest/front/app/ssp/update/`
- Завершение → `finish_onboarding: true`

---

## 3. Дизайн-система

### Цвета
```css
--primary-color: #6366f1    /* Основной (Indigo) */
--primary-dark: #4f46e5     /* Ховер */
--primary-light: rgba(99, 102, 241, 0.08)

--success-color: #10b981
--warning-color: #f59e0b
--danger-color: #ef4444
--info-color: #3b82f6
```

### Темы
- **Светлая:** `--bg-primary: #ffffff`, `--text-primary: #111827`
- **Тёмная:** `--bg-primary: #0f172a`, `--text-primary: #f1f5f9`
- Переключение через CSS-класс `:root.dark`

### Иконки
Lucide Vue Next — единая библиотека с толщиной линий 1.5px

### Типографика
System UI стек (-apple-system, BlinkMacSystemFont, Segoe UI, Roboto)

### Скругления
`--radius-sm: 4px`, `--radius-md: 8px`, `--radius-lg: 12px`, `--radius-xl: 16px`

---

## 4. Модель данных

### Пользователь
```json
{
  "id": "string",
  "email": "string",
  "first_name": "string",
  "finish_onboarding": true,
  "finish_minitask": true,
  "onboarding_version": 2,
  "telegram_bot_link": "string",
  "current_theme": "light | dark | system"
}
```

### Сфера (SSP)
```json
{
  "category": "work | health_sport | welfare | family | environment | hobby",
  "rating": 7,
  "reflection": "Заметки по сфере"
}
```

### Цель
```json
{
  "id": "string",
  "title": "string",
  "description": "string",
  "sphere": "work | health_sport | welfare | family | environment | hobby",
  "status": "work | complete | archived",
  "steps": [{ "title": "string", "order": 1, "status": "planned", "time_estimate": 30 }]
}
```

### Привычка
```json
{
  "id": "string",
  "name": "string",
  "category": "string",
  "frequency": "daily | weekly",
  "difficulty_mode": "soft | balanced | hardcore | custom",
  "streak": 14,
  "completions": [{ "date": "2026-02-16", "completed": true }]
}
```

### Сообщение чата
```json
{
  "message_id": "string",
  "content": "string",
  "message_type": "user | bot",
  "status": "sent | read",
  "reaction_type": "like | dislike | null"
}
```

### XP транзакция
```json
{
  "type": "earned | spent",
  "category": "habits | diary | goals | rewards | achievements",
  "amount": 10,
  "description": "Выполнение привычки"
}
```

### Подписка
```json
{
  "effective_tariff": { "code": "pro", "name": "Pro" },
  "effective_status": "active | expired",
  "is_trial": true,
  "days_remaining": 5
}
```

---

## 5. API-эндпоинты

### Аутентификация
- `GET /api/rest/front/csrf/` — CSRF токен
- `GET /api/rest/front/get-user-data/` — данные пользователя
- `POST /api/rest/front/update-user-data/` — обновление профиля

### Онбординг
- `POST /api/rest/front/app/onboard/update/` — сохранение шагов онбординга

### Колесо баланса
- `POST /api/rest/front/app/ssp/update/` — сохранение оценок сфер

### Цели
- `GET/POST /api/rest/front/app/goals/` — CRUD целей
- `POST /api/rest/front/app/goals/:id/complete/` — завершение цели

### Привычки
- Через Pinia store `habits.js`

### Подписка
- `GET /api/rest/front/app/subscription/get/` — текущая подписка
- `GET /api/rest/front/land/tariffs/get/` — доступные тарифы

### Настройки
- `POST /api/rest/front/app/frontend-settings/update/` — настройки интерфейса

---

## 6. Стейт-менеджмент (Pinia)

| Store | Назначение |
|-------|-----------|
| `app.js` | Пользователь, глобальные данные, онбординг, SSP, цели, тема |
| `habits.js` | Привычки, недельный контекст, настройки сложности, аналитика, достижения |
| `xp.js` | XP баланс, награды, история транзакций |
| `subscription.js` | Подписка, тарифы, промокоды, платежи |
| `chat.js` | AI чат, сообщения, WebSocket, непрочитанные |
| `activation.js` | Задачи активации первой недели |
| `abtest.js` | A/B тестирование |
| `toast.js` | Уведомления |

---

## 7. Технический стек

### Frontend
- **Vue 3** — Composition API + `<script setup>`
- **Vite 7.3** — сборка и dev-сервер
- **Pinia 3.0** — стейт-менеджмент
- **Vue Router 4.6** — маршрутизация с lazy-loading
- **Lucide Vue Next** — иконки
- **html2canvas** — экспорт визуализаций
- **canvas-confetti** — анимации празднования

### Backend
- **Django REST Framework**
- **Cookie-based авторизация + CSRF**
- **WebSocket** — реалтайм чат с AI

### Аналитика
- **Yandex Metrika** — трекинг событий

### Интеграции
- **OpenAI API** — AI-наставник
- **Telegram Mini Apps SDK** — интеграция с Telegram
- **RuTube** — видеохостинг для обучения

---

## 8. Геймификация

### XP система
- **Привычка выполнена:** +5 XP
- **Привычка пропущена:** -10 XP (настраиваемо)
- **Запись в дневнике:** +10 XP
- **Пропуск дневника:** -10 XP
- **Стрик 7 дней:** +30 XP бонус
- **Стрик 30 дней:** +100 XP бонус

### Награды
- Пользователь создаёт вишлист наград
- Тратит XP на получение наград
- Прогресс до следующей награды

### Достижения
- Бейджи за различные активности
- Галерея с разблокированными достижениями
- Уведомления о новых разблокировках

---

## 9. Лендинг и маркетинг

### Текущий лендинг (v7)
- Hero с калькулятором эффекта 1%
- Карточки проблем (3 боли)
- Подход к решению
- Как это работает
- Витрина возможностей
- Секция с ценами
- Социальное доказательство (2,847+ пользователей)

### A/B тестирование лендингов
7 версий для разных сегментов:
- v7 — Bento дизайн, проблема/решение (текущий)
- v5 — Фокус на доверии
- v4 — Путешествие по продукту
- v3 — Интерактивный, от боли
- v2 — Персона-ориентированный

### Лид-магниты
- Бесплатный тест-ревью года
- Колесо баланса без регистрации
- Каталог целей

---

## 10. SEO-каталог

Отдельные страницы для SEO:
- `/catalog/goals` — каталог целей по категориям
- `/catalog/habits` — каталог привычек
- `/catalog/bundles` — готовые наборы

---

## 11. Мобильная оптимизация

- Bottom navigation bar (56px)
- Коллапсируемый сайдбар на мобильных
- Touch-таргеты 44-48px (WCAG 2.2)
- Safe area insets для iOS
- Брейкпоинты: Mobile <768px, Tablet 768-1024px, Desktop >1024px

---

## 12. Конкурентное позиционирование

| vs | OnePercent | Конкурент |
|----|-----------|-----------|
| Notion/Todoist | AI-план + исполнение | Пустой холст, планируй сам |
| Habitica | 360° система (цели + привычки + дневник + баланс) | Только привычки |
| Личные коучи | 24/7 AI-наставник, $5-50/мес | Ограниченная доступность, $100-500/час |

### Уникальная ценность
1. Единственный продукт, объединяющий: Цели + Привычки + Баланс + Дневник + AI
2. Сценарная оценка вместо абстрактных шкал
3. Геймификация с реальной привязкой к действиям
4. AI-наставник с контекстом пользователя
5. Доступная цена vs. живой коучинг
