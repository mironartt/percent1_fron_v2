# Goals Actions

Действия для управления целями пользователя.

## goal.create

Создать новую цель пользователя.

### Параметры

| Параметр | Тип | Обязательный | По умолчанию | Описание |
|----------|-----|--------------|--------------|----------|
| `title` | string | ✓ | — | Название цели (1-500 символов) |
| `category` | string | — | "work" | Категория (жизненная сфера) |
| `why_important` | string | — | null | Почему эта цель важна |
| `why_give_me` | string | — | null | Что даст достижение цели |
| `why_about_me` | string | — | null | Почему это про меня |

### Категории

| Значение | Описание |
|----------|----------|
| `work` | Карьера, работа, профессиональное развитие |
| `health_sport` | Здоровье, спорт, физическая форма |
| `welfare` | Финансы, благосостояние, материальные цели |
| `family` | Семья, отношения, личная жизнь |
| `environment` | Окружение, друзья, нетворкинг |
| `hobby` | Хобби, увлечения, творчество |

### Пример

```json
{
  "action": "goal.create",
  "client_action_id": "a1b2c3d4-e5f6-7890-abcd-ef1234567890",
  "params": {
    "title": "Выучить Python до уровня Middle",
    "category": "work",
    "why_important": "Хочу сменить профессию и работать в IT"
  }
}
```

### Результат

```json
{
  "action": "goal.create",
  "client_action_id": "a1b2c3d4-e5f6-7890-abcd-ef1234567890",
  "success": true,
  "created_id": 789,
  "message": "Цель 'Выучить Python до уровня Middle' создана"
}
```

---

## goal.update

Обновить существующую цель.

### Параметры

| Параметр | Тип | Обязательный | Описание |
|----------|-----|--------------|----------|
| `goal_id` | integer | ✓ | ID цели для обновления |
| `title` | string | — | Новое название |
| `category` | string | — | Новая категория |
| `why_important` | string | — | Почему эта цель важна |
| `why_give_me` | string | — | Что даст достижение цели |
| `why_about_me` | string | — | Почему это про меня |

### Пример

```json
{
  "action": "goal.update",
  "client_action_id": "uuid-xxx",
  "params": {
    "goal_id": 123,
    "title": "Выучить Python и Django",
    "why_important": "Расширить навыки для fullstack разработки"
  }
}
```

### Ошибки

| Ошибка | Причина |
|--------|---------|
| `goal_id is required` | Не указан ID |
| `Goal not found` | Цель не найдена или не принадлежит пользователю |

---

## goal.complete

Отметить цель как выполненную.

### Параметры

| Параметр | Тип | Обязательный | Описание |
|----------|-----|--------------|----------|
| `goal_id` | integer | ✓ | ID цели для завершения |

### XP

**+150 XP** за завершение цели.

### Пример

```json
{
  "action": "goal.complete",
  "client_action_id": "uuid-xxx",
  "params": {
    "goal_id": 123
  }
}
```

### Важно

- Цель переходит в статус "complete"
- Все незавершённые шаги остаются незавершёнными
- Рекомендуется сначала завершить шаги, потом цель

---

## goal.delete

Удалить цель (soft delete — можно восстановить).

### Параметры

| Параметр | Тип | Обязательный | Описание |
|----------|-----|--------------|----------|
| `goal_id` | integer | ✓ | ID цели для удаления |

### Пример

```json
{
  "action": "goal.delete",
  "client_action_id": "uuid-xxx",
  "params": {
    "goal_id": 123
  }
}
```

### Важно

- Soft delete — устанавливается date_deleted
- Все шаги цели также помечаются удалёнными
- XP не списывается при удалении
