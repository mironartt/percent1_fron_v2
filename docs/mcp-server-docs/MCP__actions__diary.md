# Diary Actions

Действия для управления записями дневника.

## diary.create_entry

Создать запись в дневнике.

### Параметры

| Параметр | Тип | Обязательный | По умолчанию | Описание |
|----------|-----|--------------|--------------|----------|
| `what_done` | string | — | null | Что сделано сегодня (0-10000 символов) |
| `what_not_done` | string | — | null | Что не удалось сделать |
| `reflection` | string | — | null | Рефлексия, выводы дня |
| `plans` | string | — | null | Планы на следующий день |

**Важно:** Хотя бы одно из полей должно быть заполнено.

### XP

**+10 XP** за ведение дневника.

### Пример

```json
{
  "action": "diary.create_entry",
  "client_action_id": "uuid-xxx",
  "params": {
    "what_done": "Завершил 3 шага к цели 'Выучить Python'. Изучил async/await.",
    "what_not_done": "Не успел сделать домашку по Django",
    "reflection": "День был продуктивным, но стоит лучше планировать время",
    "plans": "Завтра закончить раздел про Django ORM"
  }
}
```

### Результат

```json
{
  "action": "diary.create_entry",
  "client_action_id": "uuid-xxx",
  "success": true,
  "created_id": 456,
  "message": "Запись в дневнике создана"
}
```

### Важно

- Поддерживает многострочный текст в каждом поле
- Дневник всегда создаётся на текущую дату
- Если запись на сегодня уже есть — создаётся новая (не обновляется)

---

## diary.update_entry

Обновить существующую запись в дневнике.

### Параметры

| Параметр | Тип | Обязательный | Описание |
|----------|-----|--------------|----------|
| `diary_id` | integer | ✓ | ID записи для обновления |
| `what_done` | string | — | Обновить "что сделано" |
| `what_not_done` | string | — | Обновить "что не сделано" |
| `reflection` | string | — | Обновить рефлексию |
| `plans` | string | — | Обновить планы |

### Пример

```json
{
  "action": "diary.update_entry",
  "client_action_id": "uuid-xxx",
  "params": {
    "diary_id": 456,
    "what_done": "Завершил 3 шага + дополнительно позанимался спортом",
    "plans": "Завтра: Django ORM + утренняя пробежка"
  }
}
```

### Результат

```json
{
  "action": "diary.update_entry",
  "client_action_id": "uuid-xxx",
  "success": true,
  "message": "Запись в дневнике обновлена"
}
```

### Ошибки

| Ошибка | Причина |
|--------|---------|
| `diary_id is required` | Не указан ID записи |
| `Diary entry not found` | Запись не найдена или не принадлежит пользователю |

### Важно

- XP за создание уже начислен и не меняется при обновлении
- Можно обновлять только свои записи
- Частичное обновление: указываются только изменяемые поля
